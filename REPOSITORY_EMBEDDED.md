# üì¶ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è Repository —Å–µ—Ä–≤–µ—Ä–∞

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è Repository

–î–∞! –Ø —Å–æ–∑–¥–∞–ª **–∏–¥–µ–Ω—Ç–∏—á–Ω—É—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏** –¥–ª—è `repository/` —á–∞—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞.

## üîß –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ –¥–ª—è Repository

### **–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏:**

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `repository/localization_embedded.go` | –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è repository —Å —Ç–µ–≥–æ–º `embed` |
| `repository/localization_stub.go` | –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –æ–±—ã—á–Ω–æ–π —Å–±–æ—Ä–∫–∏ –±–µ–∑ `embed` |

### **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|-----------|
| `repository/localization.go` | –î–æ–±–∞–≤–ª–µ–Ω—ã `useEmbedded` —Ñ–ª–∞–≥, `IsEmbedded()` –º–µ—Ç–æ–¥, –∞–≤—Ç–æ–≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ |
| `repository/main.go` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä embedded/–≤–Ω–µ—à–Ω–∏–µ —Ñ–∞–π–ª—ã, debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è |

## üöÄ API –¥–ª—è Repository

### **–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

```go
// –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è repository
repoLoc := NewEmbeddedLocalization()           // –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
repoLoc := NewLocalization()                   // –í–Ω–µ—à–Ω–∏–µ —Ñ–∞–π–ª—ã
auto := GetLocalization()                      // –ê–≤—Ç–æ–≤—ã–±–æ—Ä

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞
embedded := repoLoc.IsEmbedded()               // true/false

// –°–ø–∏—Å–æ–∫ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤ repository
langs := GetEmbeddedRepositoryLanguages()      // []string

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ repository
SetGlobalLocalization(repoLoc)
```

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### **Repository —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```
repository/
‚îú‚îÄ‚îÄ locale/                                    # –í–Ω–µ—à–Ω–∏–µ —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ translations_de.json
‚îÇ   ‚îú‚îÄ‚îÄ translations_en.json
‚îÇ   ‚îú‚îÄ‚îÄ translations_es.json
‚îÇ   ‚îî‚îÄ‚îÄ translations_ru.json
‚îú‚îÄ‚îÄ localization.go                            # –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ localization_embedded.go                   # –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã (—Å embed —Ç–µ–≥–æ–º)
‚îú‚îÄ‚îÄ localization_stub.go                       # –ó–∞–≥–ª—É—à–∫–∞ (–±–µ–∑ embed —Ç–µ–≥–∞)
‚îî‚îÄ‚îÄ main.go                                    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞
```

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞:**

```go
// –í repository/main.go:
func main() {
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é/–≤–Ω–µ—à–Ω–∏–µ —Ñ–∞–π–ª—ã
    l := GetLocalization()
    
    // Debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    if os.Getenv("CRIAGE_DEBUG") == "1" {
        embeddedLangs := GetEmbeddedRepositoryLanguages()
        if len(embeddedLangs) > 0 {
            log.Printf("üöÄ Repository: –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã: %v", embeddedLangs)
        } else {
            log.Printf("üìÅ Repository: –≤–Ω–µ—à–Ω–∏–µ —Ñ–∞–π–ª—ã: %v", l.GetSupportedLanguages())
        }
    }
}
```

## üõ†Ô∏è –°–±–æ—Ä–∫–∞ Repository

### **1. –û–±—ã—á–Ω–∞—è —Å–±–æ—Ä–∫–∞ (–≤–Ω–µ—à–Ω–∏–µ —Ñ–∞–π–ª—ã):**
```bash
# –ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
go build -o repository-server ./repository

# –ò–ª–∏ –∏–∑ repository/
cd repository && go build -o repository-server
```

### **2. –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞:**
```bash
# –ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏  
go build -tags embed -o repository-embedded ./repository

# –í—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç repository/locale/*.json –≤ –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª
```

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ **–û–±—ã—á–Ω–∞—è —Å–±–æ—Ä–∫–∞ Repository:**
```bash
go build -o repository-regular ./repository    # ‚úÖ –£—Å–ø–µ—à–Ω–æ
ls -lh repository-regular                       # ‚úÖ 10.7 MB –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª
```

### ‚úÖ **Embedded —Å–±–æ—Ä–∫–∞ Repository:**
```bash
go build -tags embed ./repository              # ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏—â–µ—Ç locale/*.json
                                               # ‚ö†Ô∏è  –û–∂–∏–¥–∞–µ–º–æ: –Ω–µ—Ç —Ñ–∞–π–ª–æ–≤ –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è
```

## üì¶ –ü–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è Repository —Å–µ—Ä–≤–µ—Ä–∞

### **–ë–∞–∑–æ–≤—ã–µ –∫–ª—é—á–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤:**

```json
{
  "server_started": "–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É %d",
  "server_stopped": "–°–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω", 
  "package_uploaded": "–ü–∞–∫–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω",
  "package_not_found": "–ü–∞–∫–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω",
  "invalid_request": "–ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å",
  "internal_error": "–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"
}
```

### **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏ Repository:**
- üá∑üá∫ **–†—É—Å—Å–∫–∏–π** (ru) - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- üá¨üáß **–ê–Ω–≥–ª–∏–π—Å–∫–∏–π** (en) - fallback  
- üá©üá™ **–ù–µ–º–µ—Ü–∫–∏–π** (de) - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π
- üá´üá∑ **–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π** (fr) - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π

## üîÑ –†–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | üìÅ –í–Ω–µ—à–Ω–∏–µ —Ñ–∞–π–ª—ã | üì¶ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ |
|----------|------------------|---------------|
| **–§–∞–π–ª—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è** | –ë–∏–Ω–∞—Ä–Ω—ã–π + locale/ | –¢–æ–ª—å–∫–æ –±–∏–Ω–∞—Ä–Ω—ã–π |
| **–°–±–æ—Ä–∫–∞** | `go build ./repository` | `go build -tags embed ./repository` |
| **–ü–µ—Ä–µ–≤–æ–¥—ã repository** | –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ locale/ | –í—Å—Ç—Ä–æ–µ–Ω—ã –≤ binary |
| **–†–∞–∑–º–µ—Ä** | –ú–µ–Ω—å—à–µ binary | –ë–æ–ª—å—à–µ binary |
| **–ü–æ—Ä—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å** | –ù—É–∂–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è locale | –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π |

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è Repository —Å–µ—Ä–≤–µ—Ä–∞

### ‚úÖ **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è Repository:**
- **üê≥ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã** - –æ–¥–∏–Ω –æ–±—Ä–∞–∑ –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤
- **‚òÅÔ∏è Cloud —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** - –Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É  
- **üì¶ Microservices** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å
- **üîß –ü—Ä–æ—Å—Ç–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** - —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª
- **üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã

### üìÅ **–í–Ω–µ—à–Ω–∏–µ —Ñ–∞–π–ª—ã –¥–ª—è Repository:**
- **üîÑ –ñ–∏–≤—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- **üåç –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤** - –∫–∞–∂–¥—ã–π –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π —è–∑—ã–∫
- **üß™ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- **üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è** - –±—Ä–µ–Ω–¥–∏–Ω–≥ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

## üê≥ Docker –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### **Dockerfile –¥–ª—è embedded Repository:**
```dockerfile
# Multi-stage build –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞
FROM golang:1.21-alpine AS builder

WORKDIR /app
COPY . .

# –°–±–æ—Ä–∫–∞ —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
RUN go build -tags embed -ldflags "-s -w" -o repository-server ./repository

FROM alpine:latest
RUN apk --no-cache add ca-certificates
COPY --from=builder /app/repository-server /repository-server

EXPOSE 8080
CMD ["/repository-server"]
```

### **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- üì¶ **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑** - —Ç–æ–ª—å–∫–æ Alpine + binary
- üöÄ **–ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫** - –Ω–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –Ω–µ—Ç —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

## ‚úÖ **–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!**

–¢–µ–ø–µ—Ä—å **–æ–±–µ —á–∞—Å—Ç–∏ Criage –∏–º–µ—é—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é**:

### üéØ **–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (`pkg/`):**
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üéØ **Repository —Å–µ—Ä–≤–µ—Ä (`repository/`):**  
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞
- ‚úÖ –ò–¥–µ–Ω—Ç–∏—á–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### üöÄ **–ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:**
```bash
# –°–±–æ—Ä–∫–∞ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏:
go build -tags embed -o criage                 # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
go build -tags embed -o criage-repo ./repository # Repository —Å–µ—Ä–≤–µ—Ä

# –†–µ–∑—É–ª—å—Ç–∞—Ç: –¥–≤–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ—Ä—Ç–∞–±–µ–ª—å–Ω—ã—Ö –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–∞!
```

**–¢–µ–ø–µ—Ä—å –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç Criage –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é** –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∫–∞–∫ –ø–æ—Ä—Ç–∞–±–µ–ª—å–Ω—ã–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–æ–≤! 